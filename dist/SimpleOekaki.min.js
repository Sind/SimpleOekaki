/*!
 * SimpleOekaki.js
 * ----------------
 * Author: Srod Karim (github.com/Sind)
 * Last updated: Fri Jan 19 2018
 */
var SimpleOekaki=function(modules){function hotDisposeChunk(chunkId){delete installedChunks[chunkId]}function hotDownloadUpdateChunk(chunkId){var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.charset="utf-8",script.src=__webpack_require__.p+""+chunkId+"."+hotCurrentHash+".hot-update.js",head.appendChild(script)}function hotDownloadManifest(requestTimeout){return requestTimeout=requestTimeout||1e4,new Promise(function(resolve,reject){if("undefined"==typeof XMLHttpRequest)return reject(new Error("No browser support"));try{var request=new XMLHttpRequest,requestPath=__webpack_require__.p+""+hotCurrentHash+".hot-update.json";request.open("GET",requestPath,!0),request.timeout=requestTimeout,request.send(null)}catch(err){return reject(err)}request.onreadystatechange=function(){if(4===request.readyState)if(0===request.status)reject(new Error("Manifest request to "+requestPath+" timed out."));else if(404===request.status)resolve();else if(200!==request.status&&304!==request.status)reject(new Error("Manifest request to "+requestPath+" failed."));else{try{var update=JSON.parse(request.responseText)}catch(e){return void reject(e)}resolve(update)}}})}function hotCreateRequire(moduleId){var me=installedModules[moduleId];if(!me)return __webpack_require__;var fn=function(request){return me.hot.active?(installedModules[request]?installedModules[request].parents.indexOf(moduleId)<0&&installedModules[request].parents.push(moduleId):(hotCurrentParents=[moduleId],hotCurrentChildModule=request),me.children.indexOf(request)<0&&me.children.push(request)):(console.warn("[HMR] unexpected require("+request+") from disposed module "+moduleId),hotCurrentParents=[]),__webpack_require__(request)};for(var name in __webpack_require__)Object.prototype.hasOwnProperty.call(__webpack_require__,name)&&"e"!==name&&Object.defineProperty(fn,name,function(name){return{configurable:!0,enumerable:!0,get:function(){return __webpack_require__[name]},set:function(value){__webpack_require__[name]=value}}}(name));return fn.e=function(chunkId){function finishChunkLoading(){hotChunksLoading--,"prepare"===hotStatus&&(hotWaitingFilesMap[chunkId]||hotEnsureUpdateChunk(chunkId),0===hotChunksLoading&&0===hotWaitingFiles&&hotUpdateDownloaded())}return"ready"===hotStatus&&hotSetStatus("prepare"),hotChunksLoading++,__webpack_require__.e(chunkId).then(finishChunkLoading,function(err){throw finishChunkLoading(),err})},fn}function hotCreateModule(moduleId){var hot={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:hotCurrentChildModule!==moduleId,active:!0,accept:function(dep,callback){if(void 0===dep)hot._selfAccepted=!0;else if("function"==typeof dep)hot._selfAccepted=dep;else if("object"==typeof dep)for(var i=0;i<dep.length;i++)hot._acceptedDependencies[dep[i]]=callback||function(){};else hot._acceptedDependencies[dep]=callback||function(){}},decline:function(dep){if(void 0===dep)hot._selfDeclined=!0;else if("object"==typeof dep)for(var i=0;i<dep.length;i++)hot._declinedDependencies[dep[i]]=!0;else hot._declinedDependencies[dep]=!0},dispose:function(callback){hot._disposeHandlers.push(callback)},addDisposeHandler:function(callback){hot._disposeHandlers.push(callback)},removeDisposeHandler:function(callback){var idx=hot._disposeHandlers.indexOf(callback);idx>=0&&hot._disposeHandlers.splice(idx,1)},check:hotCheck,apply:hotApply,status:function(l){if(!l)return hotStatus;hotStatusHandlers.push(l)},addStatusHandler:function(l){hotStatusHandlers.push(l)},removeStatusHandler:function(l){var idx=hotStatusHandlers.indexOf(l);idx>=0&&hotStatusHandlers.splice(idx,1)},data:hotCurrentModuleData[moduleId]};return hotCurrentChildModule=void 0,hot}function hotSetStatus(newStatus){hotStatus=newStatus;for(var i=0;i<hotStatusHandlers.length;i++)hotStatusHandlers[i].call(null,newStatus)}function toModuleId(id){return+id+""===id?+id:id}function hotCheck(apply){if("idle"!==hotStatus)throw new Error("check() is only allowed in idle status");return hotApplyOnUpdate=apply,hotSetStatus("check"),hotDownloadManifest(hotRequestTimeout).then(function(update){if(!update)return hotSetStatus("idle"),null;hotRequestedFilesMap={},hotWaitingFilesMap={},hotAvailableFilesMap=update.c,hotUpdateNewHash=update.h,hotSetStatus("prepare");var promise=new Promise(function(resolve,reject){hotDeferred={resolve:resolve,reject:reject}});hotUpdate={};return hotEnsureUpdateChunk(0),"prepare"===hotStatus&&0===hotChunksLoading&&0===hotWaitingFiles&&hotUpdateDownloaded(),promise})}function hotAddUpdateChunk(chunkId,moreModules){if(hotAvailableFilesMap[chunkId]&&hotRequestedFilesMap[chunkId]){hotRequestedFilesMap[chunkId]=!1;for(var moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(hotUpdate[moduleId]=moreModules[moduleId]);0==--hotWaitingFiles&&0===hotChunksLoading&&hotUpdateDownloaded()}}function hotEnsureUpdateChunk(chunkId){hotAvailableFilesMap[chunkId]?(hotRequestedFilesMap[chunkId]=!0,hotWaitingFiles++,hotDownloadUpdateChunk(chunkId)):hotWaitingFilesMap[chunkId]=!0}function hotUpdateDownloaded(){hotSetStatus("ready");var deferred=hotDeferred;if(hotDeferred=null,deferred)if(hotApplyOnUpdate)Promise.resolve().then(function(){return hotApply(hotApplyOnUpdate)}).then(function(result){deferred.resolve(result)},function(err){deferred.reject(err)});else{var outdatedModules=[];for(var id in hotUpdate)Object.prototype.hasOwnProperty.call(hotUpdate,id)&&outdatedModules.push(toModuleId(id));deferred.resolve(outdatedModules)}}function hotApply(options){function addAllToSet(a,b){for(var i=0;i<b.length;i++){var item=b[i];a.indexOf(item)<0&&a.push(item)}}if("ready"!==hotStatus)throw new Error("apply() is only allowed in ready status");options=options||{};var cb,i,j,module,moduleId,outdatedDependencies={},outdatedModules=[],appliedUpdate={},warnUnexpectedRequire=function(){console.warn("[HMR] unexpected require("+result.moduleId+") to disposed module")};for(var id in hotUpdate)if(Object.prototype.hasOwnProperty.call(hotUpdate,id)){moduleId=toModuleId(id);var result;result=hotUpdate[id]?function(updateModuleId){for(var outdatedModules=[updateModuleId],outdatedDependencies={},queue=outdatedModules.slice().map(function(id){return{chain:[id],id:id}});queue.length>0;){var queueItem=queue.pop(),moduleId=queueItem.id,chain=queueItem.chain;if((module=installedModules[moduleId])&&!module.hot._selfAccepted){if(module.hot._selfDeclined)return{type:"self-declined",chain:chain,moduleId:moduleId};if(module.hot._main)return{type:"unaccepted",chain:chain,moduleId:moduleId};for(var i=0;i<module.parents.length;i++){var parentId=module.parents[i],parent=installedModules[parentId];if(parent){if(parent.hot._declinedDependencies[moduleId])return{type:"declined",chain:chain.concat([parentId]),moduleId:moduleId,parentId:parentId};outdatedModules.indexOf(parentId)>=0||(parent.hot._acceptedDependencies[moduleId]?(outdatedDependencies[parentId]||(outdatedDependencies[parentId]=[]),addAllToSet(outdatedDependencies[parentId],[moduleId])):(delete outdatedDependencies[parentId],outdatedModules.push(parentId),queue.push({chain:chain.concat([parentId]),id:parentId})))}}}}return{type:"accepted",moduleId:updateModuleId,outdatedModules:outdatedModules,outdatedDependencies:outdatedDependencies}}(moduleId):{type:"disposed",moduleId:id};var abortError=!1,doApply=!1,doDispose=!1,chainInfo="";switch(result.chain&&(chainInfo="\nUpdate propagation: "+result.chain.join(" -> ")),result.type){case"self-declined":options.onDeclined&&options.onDeclined(result),options.ignoreDeclined||(abortError=new Error("Aborted because of self decline: "+result.moduleId+chainInfo));break;case"declined":options.onDeclined&&options.onDeclined(result),options.ignoreDeclined||(abortError=new Error("Aborted because of declined dependency: "+result.moduleId+" in "+result.parentId+chainInfo));break;case"unaccepted":options.onUnaccepted&&options.onUnaccepted(result),options.ignoreUnaccepted||(abortError=new Error("Aborted because "+moduleId+" is not accepted"+chainInfo));break;case"accepted":options.onAccepted&&options.onAccepted(result),doApply=!0;break;case"disposed":options.onDisposed&&options.onDisposed(result),doDispose=!0;break;default:throw new Error("Unexception type "+result.type)}if(abortError)return hotSetStatus("abort"),Promise.reject(abortError);if(doApply){appliedUpdate[moduleId]=hotUpdate[moduleId],addAllToSet(outdatedModules,result.outdatedModules);for(moduleId in result.outdatedDependencies)Object.prototype.hasOwnProperty.call(result.outdatedDependencies,moduleId)&&(outdatedDependencies[moduleId]||(outdatedDependencies[moduleId]=[]),addAllToSet(outdatedDependencies[moduleId],result.outdatedDependencies[moduleId]))}doDispose&&(addAllToSet(outdatedModules,[result.moduleId]),appliedUpdate[moduleId]=warnUnexpectedRequire)}var outdatedSelfAcceptedModules=[];for(i=0;i<outdatedModules.length;i++)moduleId=outdatedModules[i],installedModules[moduleId]&&installedModules[moduleId].hot._selfAccepted&&outdatedSelfAcceptedModules.push({module:moduleId,errorHandler:installedModules[moduleId].hot._selfAccepted});hotSetStatus("dispose"),Object.keys(hotAvailableFilesMap).forEach(function(chunkId){!1===hotAvailableFilesMap[chunkId]&&hotDisposeChunk(chunkId)});for(var idx,queue=outdatedModules.slice();queue.length>0;)if(moduleId=queue.pop(),module=installedModules[moduleId]){var data={},disposeHandlers=module.hot._disposeHandlers;for(j=0;j<disposeHandlers.length;j++)(cb=disposeHandlers[j])(data);for(hotCurrentModuleData[moduleId]=data,module.hot.active=!1,delete installedModules[moduleId],delete outdatedDependencies[moduleId],j=0;j<module.children.length;j++){var child=installedModules[module.children[j]];child&&((idx=child.parents.indexOf(moduleId))>=0&&child.parents.splice(idx,1))}}var dependency,moduleOutdatedDependencies;for(moduleId in outdatedDependencies)if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId)&&(module=installedModules[moduleId]))for(moduleOutdatedDependencies=outdatedDependencies[moduleId],j=0;j<moduleOutdatedDependencies.length;j++)dependency=moduleOutdatedDependencies[j],(idx=module.children.indexOf(dependency))>=0&&module.children.splice(idx,1);hotSetStatus("apply"),hotCurrentHash=hotUpdateNewHash;for(moduleId in appliedUpdate)Object.prototype.hasOwnProperty.call(appliedUpdate,moduleId)&&(modules[moduleId]=appliedUpdate[moduleId]);var error=null;for(moduleId in outdatedDependencies)if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId)&&(module=installedModules[moduleId])){moduleOutdatedDependencies=outdatedDependencies[moduleId];var callbacks=[];for(i=0;i<moduleOutdatedDependencies.length;i++)if(dependency=moduleOutdatedDependencies[i],cb=module.hot._acceptedDependencies[dependency]){if(callbacks.indexOf(cb)>=0)continue;callbacks.push(cb)}for(i=0;i<callbacks.length;i++){cb=callbacks[i];try{cb(moduleOutdatedDependencies)}catch(err){options.onErrored&&options.onErrored({type:"accept-errored",moduleId:moduleId,dependencyId:moduleOutdatedDependencies[i],error:err}),options.ignoreErrored||error||(error=err)}}}for(i=0;i<outdatedSelfAcceptedModules.length;i++){var item=outdatedSelfAcceptedModules[i];moduleId=item.module,hotCurrentParents=[moduleId];try{__webpack_require__(moduleId)}catch(err){if("function"==typeof item.errorHandler)try{item.errorHandler(err)}catch(err2){options.onErrored&&options.onErrored({type:"self-accept-error-handler-errored",moduleId:moduleId,error:err2,orginalError:err,originalError:err}),options.ignoreErrored||error||(error=err2),error||(error=err)}else options.onErrored&&options.onErrored({type:"self-accept-errored",moduleId:moduleId,error:err}),options.ignoreErrored||error||(error=err)}}return error?(hotSetStatus("fail"),Promise.reject(error)):(hotSetStatus("idle"),new Promise(function(resolve){resolve(outdatedModules)}))}function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{},hot:hotCreateModule(moduleId),parents:(hotCurrentParentsTemp=hotCurrentParents,hotCurrentParents=[],hotCurrentParentsTemp),children:[]};return modules[moduleId].call(module.exports,module,module.exports,hotCreateRequire(moduleId)),module.l=!0,module.exports}var parentHotUpdateCallback=window.webpackHotUpdateSimpleOekaki;window.webpackHotUpdateSimpleOekaki=function(chunkId,moreModules){hotAddUpdateChunk(chunkId,moreModules),parentHotUpdateCallback&&parentHotUpdateCallback(chunkId,moreModules)};var hotCurrentChildModule,hotDeferred,hotUpdate,hotUpdateNewHash,hotApplyOnUpdate=!0,hotCurrentHash="e4fd8a1d54bb44ee8243",hotRequestTimeout=1e4,hotCurrentModuleData={},hotCurrentParents=[],hotCurrentParentsTemp=[],hotStatusHandlers=[],hotStatus="idle",hotWaitingFiles=0,hotChunksLoading=0,hotWaitingFilesMap={},hotRequestedFilesMap={},hotAvailableFilesMap={},installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/test",__webpack_require__.h=function(){return hotCurrentHash},hotCreateRequire(3)(__webpack_require__.s=3)}([function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(!1),exports.push([module.i,".SimpleOekaki {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  background-color: #222222;\n  border-top-right-radius: 10px;\n  border-top-left-radius: 10px;\n  overflow: hidden;\n  user-select: none; }\n  .SimpleOekaki .color-select {\n    border: 3px solid #EEEEEE;\n    height: 32px;\n    width: 80px;\n    border-radius: 10px;\n    box-sizing: border-box; }\n  .SimpleOekaki .optionsholder {\n    display: flex;\n    flex-direction: column; }\n    .SimpleOekaki .optionsholder .optionsrow {\n      display: flex;\n      flex-direction: row;\n      padding: 5px 10px;\n      align-items: center; }\n      .SimpleOekaki .optionsholder .optionsrow.reverse {\n        flex-direction: row-reverse; }\n      .SimpleOekaki .optionsholder .optionsrow.center {\n        justify-content: center; }\n      .SimpleOekaki .optionsholder .optionsrow .option {\n        margin: 2px;\n        color: #EEEEEE; }\n        .SimpleOekaki .optionsholder .optionsrow .option.grow {\n          flex-grow: 1; }\n        .SimpleOekaki .optionsholder .optionsrow .option.label {\n          font-size: 26px;\n          font-family: 'Roboto', sans-serif; }\n  .SimpleOekaki .canvasholder {\n    border-top: 4px dashed #222222;\n    padding: 50px;\n    background-color: #888888;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n    .SimpleOekaki .canvasholder canvas {\n      border: 4px dashed #222222; }\n  .SimpleOekaki .material-icons {\n    font-size: 32px;\n    cursor: pointer;\n    border-radius: 20px;\n    box-sizing: border-box; }\n  .SimpleOekaki .invisible-overlay {\n    position: absolute;\n    width: 100%;\n    height: 100%; }\n    .SimpleOekaki .invisible-overlay.hidden {\n      display: none; }\n  .SimpleOekaki .layer-menu {\n    position: absolute;\n    top: 0px;\n    right: 0px;\n    height: 100%;\n    width: 200px;\n    transition: all 0.2s;\n    background: #888888;\n    border-left: 4px dashed #222222;\n    box-sizing: border-box; }\n    .SimpleOekaki .layer-menu.hidden {\n      margin-right: -200px; }\n    .SimpleOekaki .layer-menu .layer-list {\n      display: flex;\n      flex-direction: column; }\n    .SimpleOekaki .layer-menu .layer {\n      margin: 10px;\n      border: 4px dashed #888888;\n      border-radius: 20px;\n      width: 180px;\n      box-sizing: border-box;\n      background: #222222; }\n      .SimpleOekaki .layer-menu .layer.selected {\n        background: #888888;\n        border-color: #222222; }\n  .SimpleOekaki .color-menu {\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    width: 100%;\n    height: 400px;\n    transition: all 0.2s;\n    background: #888888;\n    border-top: 4px dashed #222222; }\n    .SimpleOekaki .color-menu.hidden {\n      margin-bottom: -400px; }\n    .SimpleOekaki .color-menu .color-wheel-holder {\n      width: 320px;\n      height: 320px; }\n  .SimpleOekaki [type='range'] {\n    -webkit-appearance: none;\n    margin: 10px 0;\n    width: 100px; }\n    .SimpleOekaki [type='range']:focus {\n      outline: 0; }\n      .SimpleOekaki [type='range']:focus::-webkit-slider-runnable-track {\n        background: white; }\n      .SimpleOekaki [type='range']:focus::-ms-fill-lower {\n        background: #FFFFFF; }\n      .SimpleOekaki [type='range']:focus::-ms-fill-upper {\n        background: white; }\n    .SimpleOekaki [type='range']::-webkit-slider-runnable-track {\n      cursor: pointer;\n      height: 14px;\n      transition: all .2s ease;\n      width: 100px;\n      box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.2), 0 0 0px rgba(13, 13, 13, 0.2);\n      background: #FFFFFF;\n      border: 6px solid #222222;\n      border-radius: 0px; }\n    .SimpleOekaki [type='range']::-webkit-slider-thumb {\n      box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.2), 0 0 0px rgba(13, 13, 13, 0.2);\n      background: #222222;\n      border: 2px solid #ffffff;\n      border-radius: 0px;\n      cursor: pointer;\n      height: 20px;\n      width: 10px;\n      -webkit-appearance: none;\n      margin-top: -9px; }\n    .SimpleOekaki [type='range']::-moz-range-track {\n      cursor: pointer;\n      height: 14px;\n      transition: all .2s ease;\n      width: 100px;\n      box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.2), 0 0 0px rgba(13, 13, 13, 0.2);\n      background: #FFFFFF;\n      border: 6px solid #222222;\n      border-radius: 0px; }\n    .SimpleOekaki [type='range']::-moz-range-thumb {\n      box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.2), 0 0 0px rgba(13, 13, 13, 0.2);\n      background: #222222;\n      border: 2px solid #ffffff;\n      border-radius: 0px;\n      cursor: pointer;\n      height: 20px;\n      width: 10px; }\n    .SimpleOekaki [type='range']::-ms-track {\n      cursor: pointer;\n      height: 14px;\n      transition: all .2s ease;\n      width: 100px;\n      background: transparent;\n      border-color: transparent;\n      border-width: 10px 0;\n      color: transparent; }\n    .SimpleOekaki [type='range']::-ms-fill-lower {\n      box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.2), 0 0 0px rgba(13, 13, 13, 0.2);\n      background: #f2f2f2;\n      border: 6px solid #222222;\n      border-radius: 0px; }\n    .SimpleOekaki [type='range']::-ms-fill-upper {\n      box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.2), 0 0 0px rgba(13, 13, 13, 0.2);\n      background: #FFFFFF;\n      border: 6px solid #222222;\n      border-radius: 0px; }\n    .SimpleOekaki [type='range']::-ms-thumb {\n      box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.2), 0 0 0px rgba(13, 13, 13, 0.2);\n      background: #222222;\n      border: 2px solid #ffffff;\n      border-radius: 0px;\n      cursor: pointer;\n      height: 20px;\n      width: 10px;\n      margin-top: 0; }\n",""])},function(module,exports,__webpack_require__){"use strict";var marker=function(svg,opts){var baseGroup=svg.g({class:"iro__marker"});baseGroup.circle(0,0,opts.r,{class:"iro__marker__outer",fill:"none",strokeWidth:5,stroke:"#000"}),baseGroup.circle(0,0,opts.r,{class:"iro__marker__inner",fill:"none",strokeWidth:2,stroke:"#fff"}),this.g=baseGroup};marker.prototype={constructor:marker,move:function(x,y){this.g.setTransform("translate",[x,y])}},module.exports=marker},function(module,exports,__webpack_require__){"use strict";function hsv2Rgb(hsv){var r,g,b,i,f,p,q,t,h=hsv.h/360,s=hsv.s/100,v=hsv.v/100;switch(i=floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q}return{r:round(255*r),g:round(255*g),b:round(255*b)}}function rgb2Hsv(rgb){var hue,r=rgb.r/255,g=rgb.g/255,b=rgb.b/255,max=Math.max(r,g,b),min=Math.min(r,g,b),delta=max-min;switch(max){case min:hue=0;break;case r:hue=(g-b)/delta+(g<b?6:0);break;case g:hue=(b-r)/delta+2;break;case b:hue=(r-g)/delta+4}return hue/=6,{h:round(360*hue),s:round(0==max?0:delta/max*100),v:round(100*max)}}function hsv2Hsl(hsv){var s=hsv.s/100,v=hsv.v/100,l=.5*v*(2-s);return s=v*s/(1-Math.abs(2*l-1)),{h:hsv.h,s:round(100*s)||0,l:round(100*l)}}function hsl2Hsv(hsl){var s=hsl.s/100,l=hsl.l/100;return l*=2,s*=l<=1?l:2-l,{h:hsl.h,s:round(2*s/(l+s)*100),v:round((l+s)/2*100)}}function rgb2Str(rgb){return"rgb"+(rgb.a?"a":"")+"("+rgb.r+", "+rgb.g+", "+rgb.b+(rgb.a?", "+rgb.a:"")+")"}function hsl2Str(hsl){return"hsl"+(hsl.a?"a":"")+"("+hsl.h+", "+hsl.s+"%, "+hsl.l+"%"+(hsl.a?", "+hsl.a:"")+")"}function rgb2Hex(rgb){var r=rgb.r,g=rgb.g,b=rgb.b,useShorthand=r%17==0&&g%17==0&&b%17==0,divider=useShorthand?17:1,bitLength=useShorthand?4:8,strLength=useShorthand?4:7,int=r/divider<<2*bitLength|g/divider<<bitLength|b/divider,str=int.toString(16);return"#"+new Array(strLength-str.length).join("0")+str}function parseColorStr(str,maxValues){var parsed=str.match(/(\S+)\((\d+)(%?)(?:\D+?)(\d+)(%?)(?:\D+?)(\d+)(%?)(?:\D+?)?([0-9\.]+?)?\)/i),val1=parseInt(parsed[2]),val2=parseInt(parsed[4]),val3=parseInt(parsed[6]);return[parsed[1],"%"==parsed[3]?val1/100*maxValues[0]:val1,"%"==parsed[5]?val2/100*maxValues[1]:val2,"%"==parsed[7]?val3/100*maxValues[2]:val3,parseFloat(parsed[8])||void 0]}function parseRgbStr(str){var parsed=parseColorStr(str,[255,255,255]);return{r:parsed[1],g:parsed[2],b:parsed[3]}}function parseHslStr(str){var parsed=parseColorStr(str,[360,100,100]);return{h:parsed[2],s:parsed[3],l:parsed[4]}}function parseHexStr(hex){hex=hex.replace("#","");var int=parseInt("0x"+hex),isShorthand=3==hex.length,bitMask=isShorthand?15:255,bitLength=isShorthand?4:8,multiplier=isShorthand?17:1;return{r:(int>>2*bitLength&bitMask)*multiplier,g:(int>>bitLength&bitMask)*multiplier,b:(int&bitMask)*multiplier}}function getColor(value){return value instanceof color?value:new color(value)}function clamp(value,min,max){return value<=min?min:value>=max?max:value}function compareObjs(a,b){var changes={};for(var key in a)changes[key]=b[key]!=a[key];return changes}function _mix(color1,color2,weight){var rgb1=getColor(color1).rgb,rgb2=getColor(color2).rgb;return weight=clamp(weight/100||.5,0,1),new color({r:floor(rgb1.r+(rgb2.r-rgb1.r)*weight),g:floor(rgb1.g+(rgb2.g-rgb1.g)*weight),b:floor(rgb1.b+(rgb2.b-rgb1.b)*weight)})}function _lighten(color,amount){var col=getColor(color),hsv=col.hsv;return hsv.v=clamp(hsv.v+amount,0,100),col.hsv=hsv,col}function _darken(color,amount){var col=getColor(color),hsv=col.hsv;return hsv.v=clamp(hsv.v-amount,0,100),col.hsv=hsv,col}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},round=Math.round,floor=Math.floor,color=function(value){this._onChange=!1,this._value={h:void 0,s:void 0,v:void 0},value&&this.set(value)};color.mix=_mix,color.lighten=_lighten,color.darken=_darken,color.hsv2Rgb=hsv2Rgb,color.rgb2Hsv=rgb2Hsv,color.hsv2Hsl=hsv2Hsl,color.hsl2Hsv=hsl2Hsv,color.hsl2Str=hsl2Str,color.rgb2Str=rgb2Str,color.rgb2Hex=rgb2Hex,color.parseHexStr=parseHexStr,color.parseHslStr=parseHslStr,color.parseRgbStr=parseRgbStr,color.prototype={constructor:color,set:function(value){"object"==(void 0===value?"undefined":_typeof(value))?value instanceof color?this.hsv=color.hsv:"r"in value?this.rgb=value:"v"in value?this.hsv=value:"l"in value&&(this.hsl=value):"string"==typeof value&&(/^rgb/.test(value)?this.rgbString=value:/^hsl/.test(value)?this.hslString=value:/^#[0-9A-Fa-f]/.test(value)&&(this.hexString=value))},setChannel:function(model,channel,value){var v=this[model];v[channel]=value,this[model]=v},clone:function(){return new color(this)},compare:function(color,model){return model=model||"hsv",compareObjs(this[model],getColor(color)[model])},mix:function(color,weight){this.hsv=_mix(this,color,weight).hsv},lighten:function(amount){_lighten(this,amount)},darken:function(amount){_darken(this,amount)}},Object.defineProperties(color.prototype,{hsv:{get:function(){var v=this._value;return{h:v.h,s:v.s,v:v.v}},set:function(newValue){if(this._onChange){var oldValue=this._value;for(var channel in oldValue)newValue.hasOwnProperty(channel)||(newValue[channel]=oldValue[channel]);var changes=compareObjs(oldValue,newValue);this._value=newValue,(changes.h||changes.s||changes.v)&&this._onChange(this,changes)}else this._value=newValue}},rgb:{get:function(){return hsv2Rgb(this._value)},set:function(value){this.hsv=rgb2Hsv(value)}},hsl:{get:function(){return hsv2Hsl(this._value)},set:function(value){this.hsv=hsl2Hsv(value)}},rgbString:{get:function(){return rgb2Str(this.rgb)},set:function(value){this.rgb=parseRgbStr(value)}},hexString:{get:function(){return rgb2Hex(this.rgb)},set:function(value){this.rgb=parseHexStr(value)}},hslString:{get:function(){return hsl2Str(this.hsl)},set:function(value){this.hsl=color.parseHslStr(value)}}}),module.exports=color},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_colorPicker=__webpack_require__(4),_colorPicker2=_interopRequireDefault(_colorPicker),_sortablejs=__webpack_require__(9),_sortablejs2=_interopRequireDefault(_sortablejs);__webpack_require__(10);var SimpleOekakiCanvas=__webpack_require__(14),utils=__webpack_require__(19),SimpleOekaki=function(_SimpleOekakiCanvas){function SimpleOekaki(div){if(_classCallCheck(this,SimpleOekaki),null==div||"DIV"!==div.tagName)throw new Error("You must provide a div as input parameter.");var maindiv=document.createElement("div");div.appendChild(maindiv),maindiv.classList.add("SimpleOekaki"),maindiv.setAttribute("oncontextmenu","return false;");var optionsholder=document.createElement("div");maindiv.appendChild(optionsholder),optionsholder.classList.add("optionsholder");var canvasholder=document.createElement("div");canvasholder.classList.add("canvasholder"),maindiv.appendChild(canvasholder);var _this=_possibleConstructorReturn(this,(SimpleOekaki.__proto__||Object.getPrototypeOf(SimpleOekaki)).call(this,canvasholder)),toprow=document.createElement("div");toprow.classList.add("optionsrow"),optionsholder.appendChild(toprow);var bottomrow=document.createElement("div");bottomrow.classList.add("optionsrow"),optionsholder.appendChild(bottomrow),_this._decSizeButton=document.createElement("i"),toprow.appendChild(_this._decSizeButton),_this._decSizeButton.classList.add("material-icons"),_this._decSizeButton.classList.add("option"),_this._decSizeButton.innerHTML="remove",_this._sizeSlider=document.createElement("input"),toprow.appendChild(_this._sizeSlider),_this._sizeSlider.setAttribute("type","range"),_this._sizeSlider.classList.add("option"),_this._sizeSlider.step=2,_this._sizeSlider.value=SimpleOekakiCanvas.DEFAULT_BRUSH_SIZE,_this._sizeSlider.min=SimpleOekakiCanvas.MIN_BRUSH_SIZE,_this._sizeSlider.max=SimpleOekakiCanvas.MAX_BRUSH_SIZE,_this._incSizeButton=document.createElement("i"),toprow.appendChild(_this._incSizeButton),_this._incSizeButton.classList.add("material-icons"),_this._incSizeButton.classList.add("option"),_this._incSizeButton.innerHTML="add",_this._layerMenuOpenButton=document.createElement("i"),toprow.appendChild(_this._layerMenuOpenButton),_this._layerMenuOpenButton.classList.add("material-icons"),_this._layerMenuOpenButton.classList.add("option"),_this._layerMenuOpenButton.innerHTML="layers",_this._invisibleLayerMenuOverlay=document.createElement("div"),maindiv.appendChild(_this._invisibleLayerMenuOverlay),_this._invisibleLayerMenuOverlay.classList.add("invisible-overlay"),_this._invisibleLayerMenuOverlay.classList.add("hidden"),_this._layerMenu=document.createElement("div"),maindiv.appendChild(_this._layerMenu),_this._layerMenu.classList.add("layer-menu"),_this._layerMenu.classList.add("hidden");var layerMenuOptionsHolder=document.createElement("div");_this._layerMenu.appendChild(layerMenuOptionsHolder),layerMenuOptionsHolder.classList.add("optionsholder");var layerMenuOptionsRow=document.createElement("div");layerMenuOptionsHolder.appendChild(layerMenuOptionsRow),layerMenuOptionsRow.classList.add("optionsrow"),layerMenuOptionsRow.classList.add("reverse"),_this._layerMenuCloseButton=document.createElement("i"),layerMenuOptionsRow.appendChild(_this._layerMenuCloseButton),_this._layerMenuCloseButton.classList.add("material-icons"),_this._layerMenuCloseButton.classList.add("option"),_this._layerMenuCloseButton.innerHTML="close",_this._layerList=document.createElement("div"),_this._layerMenu.appendChild(_this._layerList),_this._layerList.classList.add("layer-list"),_this._layerList.classList.add("list-group"),_this._layers=[document.createElement("div"),document.createElement("div"),document.createElement("div")],_this._layersColorSelect=[],_this._layers.forEach(function(layer,index){_this._layerList.appendChild(layer),layer.classList.add("layer"),layer.classList.add("list-group-item"),layer.classList.add("optionsholder"),layer.setAttribute("data-layer-id",2-index),0===index&&layer.classList.add("selected");var text=document.createElement("div");layer.appendChild(text),text.classList.add("optionsrow"),text.classList.add("layer-selector");var label=document.createElement("div");text.appendChild(label),label.classList.add("option"),label.classList.add("label"),label.innerHTML="Layer "+(3-index);var options=document.createElement("div");layer.appendChild(options),options.classList.add("optionsrow"),_this._layersColorSelect[2-index]=document.createElement("div"),options.appendChild(_this._layersColorSelect[2-index]),_this._layersColorSelect[2-index].classList.add("color-select"),_this._layersColorSelect[2-index].classList.add("option"),_this._layersColorSelect[2-index].classList.add("grow"),_this._layersColorSelect[2-index].style.backgroundColor="rgb(0,0,0)"}),_this._backgroundLayer=document.createElement("div"),_this._layerMenu.appendChild(_this._backgroundLayer),_this._backgroundLayer.classList.add("layer"),_this._backgroundLayer.classList.add("optionsholder"),_this._backgroundLayer.setAttribute("data-layer-id",-1);var text=document.createElement("div");_this._backgroundLayer.appendChild(text),text.classList.add("optionsrow"),text.classList.add("layer-selector");var label=document.createElement("div");text.appendChild(label),label.classList.add("option"),label.classList.add("label"),label.innerHTML="Background";var options=document.createElement("div");_this._backgroundLayer.appendChild(options),options.classList.add("optionsrow"),_this._backgroundColorSelect=document.createElement("div"),options.appendChild(_this._backgroundColorSelect),_this._backgroundColorSelect.classList.add("color-select"),_this._backgroundColorSelect.classList.add("option"),_this._backgroundColorSelect.classList.add("grow"),_this._backgroundColorSelect.style.backgroundColor="rgb(255,255,255)",_this._invisibleColorMenuOverlay=document.createElement("div"),maindiv.appendChild(_this._invisibleColorMenuOverlay),_this._invisibleColorMenuOverlay.classList.add("invisible-overlay"),_this._invisibleColorMenuOverlay.classList.add("hidden"),_this._colorMenu=document.createElement("div"),maindiv.append(_this._colorMenu),_this._colorMenu.classList.add("color-menu"),_this._colorMenu.classList.add("hidden");var colorMenuOptionsHolder=document.createElement("div");_this._colorMenu.appendChild(colorMenuOptionsHolder),colorMenuOptionsHolder.classList.add("optionsholder");var colorMenuOptionsRow=document.createElement("div");colorMenuOptionsHolder.appendChild(colorMenuOptionsRow),colorMenuOptionsRow.classList.add("optionsrow"),colorMenuOptionsRow.classList.add("reverse"),_this._colorMenuCloseButton=document.createElement("i"),colorMenuOptionsRow.appendChild(_this._colorMenuCloseButton),_this._colorMenuCloseButton.classList.add("material-icons"),_this._colorMenuCloseButton.classList.add("option"),_this._colorMenuCloseButton.innerHTML="close";var colorMenuPickerRow=document.createElement("div");colorMenuOptionsHolder.appendChild(colorMenuPickerRow),colorMenuPickerRow.classList.add("optionsrow"),colorMenuPickerRow.classList.add("center");var colorPickerHolder=document.createElement("div");return colorMenuPickerRow.appendChild(colorPickerHolder),colorPickerHolder.classList.add("color-wheel-holder"),colorPickerHolder.id="color-wheel-holder",_this._colorPicker=new _colorPicker2.default("#color-wheel-holder"),_this._setHTMLInputCallbacks(),_this}return _inherits(SimpleOekaki,_SimpleOekakiCanvas),_createClass(SimpleOekaki,[{key:"_onBrushSizeChange",value:function(brushSize){this._sizeSlider.value=brushSize}},{key:"_onCurrentLayerChange",value:function(id){this._layers.forEach(function(layer){id===parseInt(layer.getAttribute("data-layer-id"),10)?layer.classList.add("selected"):layer.classList.remove("selected")})}},{key:"_onBackgroundColorChange",value:function(color){var colorString="rgb("+255*color[0]+","+255*color[1]+","+255*color[2]+")";this._backgroundColorSelect.style.backgroundColor=colorString}},{key:"_onLayerColorChange",value:function(id,color){var colorString="rgb("+255*color[0]+","+255*color[1]+","+255*color[2]+")";this._layersColorSelect[id].style.backgroundColor=colorString}},{key:"_setHTMLInputCallbacks",value:function(){var _this2=this;this._decSizeButton.addEventListener("click",function(){_this2.brushSize-=2}),this._incSizeButton.addEventListener("click",function(){_this2.brushSize+=2}),this._sizeSlider.addEventListener("change",function(){_this2.brushSize=parseInt(_this2._sizeSlider.value,10)}),this._layerMenuOpenButton.addEventListener("click",function(){_this2.openLayerMenu()}),this._layerMenuCloseButton.addEventListener("click",function(){_this2.closeLayerMenu()}),this._invisibleLayerMenuOverlay.addEventListener("click",function(){_this2.closeLayerMenu()}),this._colorMenuCloseButton.addEventListener("click",function(){_this2.closeColorMenu()}),this._invisibleColorMenuOverlay.addEventListener("click",function(){_this2.closeColorMenu()}),_sortablejs2.default.create(this._layerList,{onUpdate:function(event){_this2.layerOrder=Array.prototype.map.call(event.to.children,function(el){return el.getAttribute("data-layer-id")}).reverse()}}),Array.prototype.forEach.call(document.getElementsByClassName("layer-selector"),function(text){var id=parseInt(text.parentNode.getAttribute("data-layer-id"),10);-1!==id&&text.addEventListener("click",function(){_this2.currentLayer=id},_this2)}),Array.prototype.forEach.call(document.getElementsByClassName("color-select"),function(colorfield){var id=parseInt(colorfield.parentNode.parentNode.getAttribute("data-layer-id"),10);colorfield.addEventListener("click",function(){_this2.openColorMenu(),_this2._colorPicker.off("color:change"),_this2._colorPicker.on("color:change",function(color){_this2.setLayerColor(id,utils.iRGBtoRGB(color.rgb))}),_this2._colorPicker.color.rgb=utils.RGBtoiRGB(_this2.getLayerColor(id))})},this)}},{key:"openLayerMenu",value:function(){this._layerMenu.classList.remove("hidden"),this._invisibleLayerMenuOverlay.classList.remove("hidden")}},{key:"closeLayerMenu",value:function(){this._layerMenu.classList.add("hidden"),this._invisibleLayerMenuOverlay.classList.add("hidden")}},{key:"openColorMenu",value:function(){this._colorMenu.classList.remove("hidden"),this._invisibleColorMenuOverlay.classList.remove("hidden")}},{key:"closeColorMenu",value:function(){this._colorMenu.classList.add("hidden"),this._invisibleColorMenuOverlay.classList.add("hidden")}}]),SimpleOekaki}(SimpleOekakiCanvas);void 0!==module&&module.exports&&(module.exports=SimpleOekaki),window&&(window.SimpleOekaki=SimpleOekaki)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function listen(el,eventList,callback){for(var i=0;i<eventList.length;i++)el.addEventListener(eventList[i],callback)}function unlisten(el,eventList,callback){for(var i=0;i<eventList.length;i++)el.removeEventListener(eventList[i],callback)}function whenReady(callback){document.readyState==READYSTATE_COMPLETE?callback():listen(document,[EVENT_READYSTATE_CHANGE],function stateChange(e){document.readyState==READYSTATE_COMPLETE&&(callback(),unlisten(document,[EVENT_READYSTATE_CHANGE],stateChange))})}var _wheel=__webpack_require__(5),_wheel2=_interopRequireDefault(_wheel),_slider=__webpack_require__(6),_slider2=_interopRequireDefault(_slider),_svg=__webpack_require__(7),_svg2=_interopRequireDefault(_svg),_color=__webpack_require__(2),_color2=_interopRequireDefault(_color),_stylesheet=__webpack_require__(8),_stylesheet2=_interopRequireDefault(_stylesheet),EVENT_READYSTATE_CHANGE="readystatechange",READYSTATE_COMPLETE="complete",colorPicker=function(el,opts){var _this2=this;opts=opts||{},this._events={},this._mouseTarget=!1,this._colorChangeActive=!1,this.css=opts.css||opts.styles||void 0,whenReady(function(){_this2._init(el,opts)})};colorPicker.prototype={constructor:colorPicker,_init:function(el,opts){var _this3=this;el="string"==typeof el?document.querySelector(el):el;var width=opts.width||parseInt(el.width)||320,height=opts.height||parseInt(el.height)||320,padding=opts.padding+2||6,borderWidth=opts.borderWidth||0,markerRadius=opts.markerRadius||8,sliderMargin=opts.sliderMargin||24,sliderHeight=opts.sliderHeight||2*markerRadius+2*padding+2*borderWidth,bodyWidth=Math.min(height-sliderHeight-sliderMargin,width),wheelRadius=bodyWidth/2-borderWidth,leftMargin=(width-bodyWidth)/2,marker={r:markerRadius},borderStyles={w:borderWidth,color:opts.borderColor||"#fff"};this.el=el,this.svg=new _svg2.default(el,width,height),this.ui=[new _wheel2.default(this.svg,{cX:leftMargin+bodyWidth/2,cY:bodyWidth/2,r:wheelRadius,rMax:wheelRadius-(markerRadius+padding),marker:marker,border:borderStyles,lightness:void 0==opts.wheelLightness||opts.wheelLightness,anticlockwise:opts.anticlockwise}),new _slider2.default(this.svg,{sliderType:"v",x:leftMargin+borderWidth,y:bodyWidth+sliderMargin,w:bodyWidth-2*borderWidth,h:sliderHeight-2*borderWidth,r:sliderHeight/2-borderWidth,marker:marker,border:borderStyles})],this.stylesheet=new _stylesheet2.default,this.color=new _color2.default,this.color._onChange=this._update.bind(this),this.color.set(opts.color||opts.defaultValue||"#fff"),this.on("history:stateChange",function(base){_this3.svg.updateUrls(base)}),listen(this.svg.el,["mousedown","touchstart"],this)},_update:function(color,changes){for(var rgb=color.rgbString,css=this.css,i=0;i<this.ui.length;i++)this.ui[i].update(color,changes);for(var selector in css){var properties=css[selector];for(var prop in properties)this.stylesheet.setRule(selector,prop,rgb)}this._colorChangeActive||(this._colorChangeActive=!0,this.emit("color:change",color,changes),this._colorChangeActive=!1)},on:function(eventType,callback){var events=this._events;(events[eventType]||(events[eventType]=[])).push(callback)},off:function(eventType,callback){var eventList=this._events[eventType];eventList&&eventList.splice(eventList.indexOf(callback),1)},emit:function(eventType){for(var events=this._events,callbackList=(events[eventType]||[]).concat(events["*"]||[]),_len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];for(var i=0;i<callbackList.length;i++)callbackList[i].apply(null,args)},handleEvent:function(e){var point=e.touches?e.changedTouches[0]:e,rect=this.svg.el.getBoundingClientRect(),x=point.clientX-rect.left,y=point.clientY-rect.top;switch(e.type){case"mousedown":case"touchstart":for(var i=0;i<this.ui.length;i++){var uiElement=this.ui[i];uiElement.checkHit(x,y)&&(this._mouseTarget=uiElement,listen(document,["mousemove","touchmove","mouseup","touchend"],this),this.emit("input:start"),this.color.hsv=this._mouseTarget.input(x,y))}break;case"mousemove":case"touchmove":this.color.hsv=this._mouseTarget.input(x,y);break;case"mouseup":case"touchend":this._mouseTarget=!1,this.emit("input:end"),unlisten(document,["mousemove","touchmove","mouseup","touchend"],this)}this._mouseTarget&&e.preventDefault()}},module.exports=colorPicker},function(module,exports,__webpack_require__){"use strict";var _marker=__webpack_require__(1),_marker2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_marker),PI=Math.PI,sqrt=Math.sqrt,abs=Math.abs,round=Math.round,wheel=function(svg,opts){this._opts=opts,this.type="wheel";var cY=opts.cY,cX=opts.cX,r=opts.r,border=opts.border,baseGroup=svg.g({class:"iro__wheel"});baseGroup.circle(cX,cY,r+border.w/2,{class:"iro__wheel__border",fill:"#fff",stroke:border.color,strokeWidth:border.w});for(var ringGroup=baseGroup.g({class:"iro__wheel__hue",strokeWidth:r,fill:"none"}),hue=0;hue<360;hue++)ringGroup.arc(cX,cY,r/2,hue,hue+1.5,{stroke:"hsl("+(opts.anticlockwise?360-hue:hue)+",100%,50%)"});baseGroup.circle(cX,cY,r,{class:"iro__wheel__saturation"}).setGradient("fill",svg.gradient("radial",{0:{color:"#fff"},100:{color:"#fff",opacity:0}})),this._lightness=baseGroup.circle(cX,cY,r,{class:"iro__wheel__lightness",opacity:0}),this.marker=new _marker2.default(baseGroup,opts.marker)};wheel.prototype={constructor:wheel,update:function(color,changes){var opts=this._opts,hsv=color.hsv;if(changes.v&&opts.lightness&&this._lightness.setAttrs({opacity:(1-hsv.v/100).toFixed(2)}),changes.h||changes.s){var hueAngle=(opts.anticlockwise?360-hsv.h:hsv.h)*(PI/180),dist=hsv.s/100*opts.rMax;this.marker.move(opts.cX+dist*Math.cos(hueAngle),opts.cY+dist*Math.sin(hueAngle))}},input:function(x,y){var opts=this._opts,rangeMax=opts.rMax,_x=opts.cX-x,_y=opts.cY-y,angle=Math.atan2(_y,_x),hue=round(angle*(180/PI))+180,dist=Math.min(sqrt(_x*_x+_y*_y),rangeMax);return hue=opts.anticlockwise?360-hue:hue,{h:hue,s:round(100/rangeMax*dist)}},checkHit:function(x,y){var opts=this._opts,dx=abs(x-opts.cX),dy=abs(y-opts.cY);return sqrt(dx*dx+dy*dy)<opts.r}},module.exports=wheel},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marker=__webpack_require__(1),_marker2=_interopRequireDefault(_marker),_color=__webpack_require__(2),_color2=_interopRequireDefault(_color),slider=function(svg,opts){var r=opts.r,w=opts.w,h=opts.h,x=opts.x,y=opts.y,borderWidth=opts.border.w;opts.range={min:x+r,max:x+w-r,w:w-2*r},opts.sliderType=opts.sliderType||"v",this.type="slider",this._opts=opts;var radius=r+borderWidth/2,baseGroup=svg.g({class:"iro__slider"}),rect=baseGroup.insert("rect",{class:"iro__slider__value",rx:radius,ry:radius,x:x-borderWidth/2,y:y-borderWidth/2,width:w+borderWidth,height:h+borderWidth,strokeWidth:borderWidth,stroke:opts.border.color});rect.setGradient("fill",svg.gradient("linear",{0:{color:"#000"},100:{color:"#fff"}})),this._gradient=rect.gradient,this.marker=new _marker2.default(baseGroup,opts.marker)};slider.prototype={constructor:slider,update:function(color,changes){var opts=this._opts,range=opts.range,hsv=color.hsv,hsl=_color2.default.hsv2Hsl({h:hsv.h,s:hsv.s,v:100});if("v"==opts.sliderType&&((changes.h||changes.s)&&this._gradient.stops[1].setAttrs({stopColor:"hsl("+hsl.h+","+hsl.s+"%,"+hsl.l+"%)"}),changes.v)){var percent=hsv.v/100;this.marker.move(range.min+percent*range.w,opts.y+opts.h/2)}},input:function(x,y){var opts=this._opts,range=opts.range,dist=Math.max(Math.min(x,range.max),range.min)-range.min;return{v:Math.round(100/range.w*dist)}},checkHit:function(x,y){var opts=this._opts;return x>opts.x&&x<opts.x+opts.w&&y>opts.y&&y<opts.y+opts.h}},module.exports=slider},function(module,exports,__webpack_require__){"use strict";var GRADIENT_INDEX=0,SVG_ATTRIBUTE_SHORTHANDS={class:"class",stroke:"stroke",strokeWidth:"stroke-width",fill:"fill",opacity:"opacity",offset:"offset",stopColor:"stop-color",stopOpacity:"stop-opacity"},SVG_TRANSFORM_SHORTHANDS={translate:"setTranslate",scale:"setScale",rotate:"setRotate"},ua=window.navigator.userAgent.toLowerCase(),IS_IE=/msie|trident|edge/.test(ua),IS_SAFARI=/^((?!chrome|android).)*safari/i.test(ua),svgElement=function(root,parent,type,attrs){var el=document.createElementNS("http://www.w3.org/2000/svg",type);this.el=el,this.setAttrs(attrs),(parent.el||parent).appendChild(el),this._root=root,this._svgTransforms={},this._transformList=!!el.transform&&el.transform.baseVal};svgElement.prototype={constructor:svgElement,insert:function(type,attrs){return new svgElement(this._root,this,type,attrs)},g:function(attrs){return this.insert("g",attrs)},arc:function(cx,cy,radius,startAngle,endAngle,attrs){var largeArcFlag=endAngle-startAngle<=180?0:1;startAngle*=Math.PI/180,endAngle*=Math.PI/180;var x1=cx+radius*Math.cos(endAngle),y1=cy+radius*Math.sin(endAngle),x2=cx+radius*Math.cos(startAngle),y2=cy+radius*Math.sin(startAngle);return attrs=attrs||{},attrs.d=["M",x1,y1,"A",radius,radius,0,largeArcFlag,0,x2,y2].join(" "),this.insert("path",attrs)},circle:function(cx,cy,radius,attrs){return attrs=attrs||{},attrs.cx=cx,attrs.cy=cy,attrs.r=radius,this.insert("circle",attrs)},setTransform:function(type,args){if(IS_IE)this.setAttrs({transform:type+"("+args.join(", ")+")"});else{var transform,transformFn,svgTransforms=this._svgTransforms;svgTransforms[type]?transform=svgTransforms[type]:(transform=this._root.el.createSVGTransform(),svgTransforms[type]=transform,this._transformList.appendItem(transform)),transformFn=type in SVG_TRANSFORM_SHORTHANDS?SVG_TRANSFORM_SHORTHANDS[type]:type,transform[transformFn].apply(transform,args)}},setAttrs:function(attrs){for(var attr in attrs){var name=attr in SVG_ATTRIBUTE_SHORTHANDS?SVG_ATTRIBUTE_SHORTHANDS[attr]:attr;this.el.setAttribute(name,attrs[attr])}},setGradient:function(attr,gradient){var attrs={};attrs[attr]=gradient.getUrl(),gradient._refs[attr]=this,this.gradient=gradient,this.setAttrs(attrs)}};var svgGradient=function(root,type,stops){var stopElements=[],gradient=root._defs.insert(type+"Gradient",{id:"iroGradient"+GRADIENT_INDEX++});for(var offset in stops){var stop=stops[offset];stopElements.push(gradient.insert("stop",{offset:offset+"%",stopColor:stop.color,stopOpacity:void 0===stop.opacity?1:stop.opacity}))}this.el=gradient.el,this.stops=stopElements,this._refs={}};svgGradient.prototype.getUrl=function(base){return"url("+(IS_SAFARI?base||window.location.href:"")+"#"+this.el.id+")"};var svgRoot=function(parent,width,height){svgElement.call(this,this,parent,"svg",{width:width,height:height,style:"display:block"}),this._defs=this.insert("defs"),this._gradients=[]};svgRoot.prototype=Object.create(svgElement.prototype),svgRoot.prototype.constructor=svgRoot,svgRoot.prototype.gradient=function(type,stops){var gradient=new svgGradient(this,type,stops);return this._gradients.push(gradient),gradient},svgRoot.prototype.updateUrls=function(base){if(IS_SAFARI)for(var gradients=this._gradients,i=0;i<gradients.length;i++)for(var key in gradients[i]._refs){var attrs={};attrs[key]=gradients[i].getUrl(base),gradients[i]._refs[key].setAttrs(attrs)}},module.exports=svgRoot},function(module,exports,__webpack_require__){"use strict";var stylesheet=function(){var style=document.createElement("style");document.head.appendChild(style),style.appendChild(document.createTextNode("")),this.style=style;var sheet=style.sheet;this.sheet=sheet,this.rules=sheet.rules||sheet.cssRules,this.map={}};stylesheet.prototype={constructor:stylesheet,setRule:function(selector,property,value){var sheet=this.sheet,rules=sheet.rules||sheet.cssRules,map=this.map;if(property=property.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()}),map.hasOwnProperty(selector))map[selector].setProperty(property,value);else{var index=rules.length,declaration=property+": "+value;try{sheet.insertRule(selector+" {"+declaration+";}",index)}catch(e){sheet.addRule(selector,declaration,index)}finally{rules=sheet.rules||sheet.cssRules,map[selector]=rules[index].style}}}},Object.defineProperties(stylesheet.prototype,{enabled:{get:function(){return!this.sheet.disabled},set:function(value){this.sheet.disabled=!value}},cssText:{get:function(){var map=this.map,ret=[];for(var selector in map)ret.push(selector.replace(/,\W/g,",\n")+" {\n\t"+map[selector].cssText.replace(/;\W/g,";\n\t")+"\n}");return ret.join("\n")}},css:{get:function(){var map=this.map,ret={};for(var selector in map){var ruleSet=map[selector];ret[selector]={};for(var i=0;i<ruleSet.length;i++){var property=ruleSet[i];ret[selector][property]=ruleSet.getPropertyValue(property)}}return ret}}}),module.exports=stylesheet},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(factory){__WEBPACK_AMD_DEFINE_FACTORY__=factory,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(function(){function Sortable(el,options){if(!el||!el.nodeType||1!==el.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(el);this.el=el,this.options=options=_extend({},options),el[expando]=this;var defaults={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(el.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(dataTransfer,dragEl){dataTransfer.setData("Text",dragEl.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer};for(var name in defaults)!(name in options)&&(options[name]=defaults[name]);_prepareGroup(options);for(var fn in this)"_"===fn.charAt(0)&&"function"==typeof this[fn]&&(this[fn]=this[fn].bind(this));this.nativeDraggable=!options.forceFallback&&supportDraggable,_on(el,"mousedown",this._onTapStart),_on(el,"touchstart",this._onTapStart),options.supportPointer&&_on(el,"pointerdown",this._onTapStart),this.nativeDraggable&&(_on(el,"dragover",this),_on(el,"dragenter",this)),touchDragOverListeners.push(this._onDragOver),options.store&&this.sort(options.store.get(this))}function _cloneHide(sortable,state){"clone"!==sortable.lastPullMode&&(state=!0),cloneEl&&cloneEl.state!==state&&(_css(cloneEl,"display",state?"none":""),state||cloneEl.state&&(sortable.options.group.revertClone?(rootEl.insertBefore(cloneEl,nextEl),sortable._animate(dragEl,cloneEl)):rootEl.insertBefore(cloneEl,dragEl)),cloneEl.state=state)}function _closest(el,selector,ctx){if(el){ctx=ctx||document;do{if(">*"===selector&&el.parentNode===ctx||_matches(el,selector))return el}while(el=_getParentOrHost(el))}return null}function _getParentOrHost(el){var parent=el.host;return parent&&parent.nodeType?parent:el.parentNode}function _globalDragOver(evt){evt.dataTransfer&&(evt.dataTransfer.dropEffect="move"),evt.preventDefault()}function _on(el,event,fn){el.addEventListener(event,fn,captureMode)}function _off(el,event,fn){el.removeEventListener(event,fn,captureMode)}function _toggleClass(el,name,state){if(el)if(el.classList)el.classList[state?"add":"remove"](name);else{var className=(" "+el.className+" ").replace(R_SPACE," ").replace(" "+name+" "," ");el.className=(className+(state?" "+name:"")).replace(R_SPACE," ")}}function _css(el,prop,val){var style=el&&el.style;if(style){if(void 0===val)return document.defaultView&&document.defaultView.getComputedStyle?val=document.defaultView.getComputedStyle(el,""):el.currentStyle&&(val=el.currentStyle),void 0===prop?val:val[prop];prop in style||(prop="-webkit-"+prop),style[prop]=val+("string"==typeof val?"":"px")}}function _find(ctx,tagName,iterator){if(ctx){var list=ctx.getElementsByTagName(tagName),i=0,n=list.length;if(iterator)for(;i<n;i++)iterator(list[i],i);return list}return[]}function _dispatchEvent(sortable,rootEl,name,targetEl,toEl,fromEl,startIndex,newIndex){sortable=sortable||rootEl[expando];var evt=document.createEvent("Event"),options=sortable.options,onName="on"+name.charAt(0).toUpperCase()+name.substr(1);evt.initEvent(name,!0,!0),evt.to=toEl||rootEl,evt.from=fromEl||rootEl,evt.item=targetEl||rootEl,evt.clone=cloneEl,evt.oldIndex=startIndex,evt.newIndex=newIndex,rootEl.dispatchEvent(evt),options[onName]&&options[onName].call(sortable,evt)}function _onMove(fromEl,toEl,dragEl,dragRect,targetEl,targetRect,originalEvt,willInsertAfter){var evt,retVal,sortable=fromEl[expando],onMoveFn=sortable.options.onMove;return evt=document.createEvent("Event"),evt.initEvent("move",!0,!0),evt.to=toEl,evt.from=fromEl,evt.dragged=dragEl,evt.draggedRect=dragRect,evt.related=targetEl||toEl,evt.relatedRect=targetRect||toEl.getBoundingClientRect(),evt.willInsertAfter=willInsertAfter,fromEl.dispatchEvent(evt),onMoveFn&&(retVal=onMoveFn.call(sortable,evt,originalEvt)),retVal}function _disableDraggable(el){el.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsLast(el,evt){var lastEl=el.lastElementChild,rect=lastEl.getBoundingClientRect();return evt.clientY-(rect.top+rect.height)>5||evt.clientX-(rect.left+rect.width)>5}function _generateId(el){for(var str=el.tagName+el.className+el.src+el.href+el.textContent,i=str.length,sum=0;i--;)sum+=str.charCodeAt(i);return sum.toString(36)}function _index(el,selector){var index=0;if(!el||!el.parentNode)return-1;for(;el&&(el=el.previousElementSibling);)"TEMPLATE"===el.nodeName.toUpperCase()||">*"!==selector&&!_matches(el,selector)||index++;return index}function _matches(el,selector){if(el){selector=selector.split(".");var tag=selector.shift().toUpperCase(),re=new RegExp("\\s("+selector.join("|")+")(?=\\s)","g");return!(""!==tag&&el.nodeName.toUpperCase()!=tag||selector.length&&((" "+el.className+" ").match(re)||[]).length!=selector.length)}return!1}function _throttle(callback,ms){var args,_this;return function(){void 0===args&&(args=arguments,_this=this,setTimeout(function(){1===args.length?callback.call(_this,args[0]):callback.apply(_this,args),args=void 0},ms))}}function _extend(dst,src){if(dst&&src)for(var key in src)src.hasOwnProperty(key)&&(dst[key]=src[key]);return dst}function _clone(el){return Polymer&&Polymer.dom?Polymer.dom(el).cloneNode(!0):$?$(el).clone(!0)[0]:el.cloneNode(!0)}function _saveInputCheckedState(root){for(var inputs=root.getElementsByTagName("input"),idx=inputs.length;idx--;){var el=inputs[idx];el.checked&&savedInputChecked.push(el)}}function _nextTick(fn){return setTimeout(fn,0)}function _cancelNextTick(id){return clearTimeout(id)}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var dragEl,parentEl,ghostEl,cloneEl,rootEl,nextEl,lastDownEl,scrollEl,scrollParentEl,scrollCustomFn,lastEl,lastCSS,lastParentCSS,oldIndex,newIndex,activeGroup,putSortable,tapEvt,touchEvt,moved,autoScroll={},R_SPACE=/\s+/g,R_FLOAT=/left|right|inline/,expando="Sortable"+(new Date).getTime(),win=window,document=win.document,parseInt=win.parseInt,setTimeout=win.setTimeout,$=win.jQuery||win.Zepto,Polymer=win.Polymer,captureMode=!1,passiveMode=!1,supportDraggable="draggable"in document.createElement("div"),supportCssPointerEvents=function(el){return!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&(el=document.createElement("x"),el.style.cssText="pointer-events:auto","auto"===el.style.pointerEvents)}(),_silent=!1,abs=Math.abs,min=Math.min,savedInputChecked=[],touchDragOverListeners=[],_autoScroll=_throttle(function(evt,options,rootEl){if(rootEl&&options.scroll){var el,rect,vx,vy,scrollOffsetX,scrollOffsetY,_this=rootEl[expando],sens=options.scrollSensitivity,speed=options.scrollSpeed,x=evt.clientX,y=evt.clientY,winWidth=window.innerWidth,winHeight=window.innerHeight;if(scrollParentEl!==rootEl&&(scrollEl=options.scroll,scrollParentEl=rootEl,scrollCustomFn=options.scrollFn,!0===scrollEl)){scrollEl=rootEl;do{if(scrollEl.offsetWidth<scrollEl.scrollWidth||scrollEl.offsetHeight<scrollEl.scrollHeight)break}while(scrollEl=scrollEl.parentNode)}scrollEl&&(el=scrollEl,rect=scrollEl.getBoundingClientRect(),vx=(abs(rect.right-x)<=sens)-(abs(rect.left-x)<=sens),vy=(abs(rect.bottom-y)<=sens)-(abs(rect.top-y)<=sens)),vx||vy||(vx=(winWidth-x<=sens)-(x<=sens),vy=(winHeight-y<=sens)-(y<=sens),(vx||vy)&&(el=win)),autoScroll.vx===vx&&autoScroll.vy===vy&&autoScroll.el===el||(autoScroll.el=el,autoScroll.vx=vx,autoScroll.vy=vy,clearInterval(autoScroll.pid),el&&(autoScroll.pid=setInterval(function(){if(scrollOffsetY=vy?vy*speed:0,scrollOffsetX=vx?vx*speed:0,"function"==typeof scrollCustomFn)return scrollCustomFn.call(_this,scrollOffsetX,scrollOffsetY,evt);el===win?win.scrollTo(win.pageXOffset+scrollOffsetX,win.pageYOffset+scrollOffsetY):(el.scrollTop+=scrollOffsetY,el.scrollLeft+=scrollOffsetX)},24)))}},30),_prepareGroup=function(options){function toFn(value,pull){return void 0!==value&&!0!==value||(value=group.name),"function"==typeof value?value:function(to,from){var fromGroup=from.options.group.name;return pull?value:value&&(value.join?value.indexOf(fromGroup)>-1:fromGroup==value)}}var group={},originalGroup=options.group;originalGroup&&"object"==(void 0===originalGroup?"undefined":_typeof(originalGroup))||(originalGroup={name:originalGroup}),group.name=originalGroup.name,group.checkPull=toFn(originalGroup.pull,!0),group.checkPut=toFn(originalGroup.put),group.revertClone=originalGroup.revertClone,options.group=group};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){passiveMode=!1,captureMode={capture:!1,passive:passiveMode}}}))}catch(err){}return Sortable.prototype={constructor:Sortable,_onTapStart:function(evt){var startIndex,_this=this,el=this.el,options=this.options,preventOnFilter=options.preventOnFilter,type=evt.type,touch=evt.touches&&evt.touches[0],target=(touch||evt).target,originalTarget=evt.target.shadowRoot&&evt.path&&evt.path[0]||target,filter=options.filter;if(_saveInputCheckedState(el),!dragEl&&!(/mousedown|pointerdown/.test(type)&&0!==evt.button||options.disabled)&&!originalTarget.isContentEditable&&(target=_closest(target,options.draggable,el))&&lastDownEl!==target){if(startIndex=_index(target,options.draggable),"function"==typeof filter){if(filter.call(this,evt,target,this))return _dispatchEvent(_this,originalTarget,"filter",target,el,el,startIndex),void(preventOnFilter&&evt.preventDefault())}else if(filter&&(filter=filter.split(",").some(function(criteria){if(criteria=_closest(originalTarget,criteria.trim(),el))return _dispatchEvent(_this,criteria,"filter",target,el,el,startIndex),!0})))return void(preventOnFilter&&evt.preventDefault());options.handle&&!_closest(originalTarget,options.handle,el)||this._prepareDragStart(evt,touch,target,startIndex)}},_prepareDragStart:function(evt,touch,target,startIndex){var dragStartFn,_this=this,el=_this.el,options=_this.options,ownerDocument=el.ownerDocument;target&&!dragEl&&target.parentNode===el&&(tapEvt=evt,rootEl=el,dragEl=target,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=target,activeGroup=options.group,oldIndex=startIndex,this._lastX=(touch||evt).clientX,this._lastY=(touch||evt).clientY,dragEl.style["will-change"]="all",dragStartFn=function(){_this._disableDelayedDrag(),dragEl.draggable=_this.nativeDraggable,_toggleClass(dragEl,options.chosenClass,!0),_this._triggerDragStart(evt,touch),_dispatchEvent(_this,rootEl,"choose",dragEl,rootEl,rootEl,oldIndex)},options.ignore.split(",").forEach(function(criteria){_find(dragEl,criteria.trim(),_disableDraggable)}),_on(ownerDocument,"mouseup",_this._onDrop),_on(ownerDocument,"touchend",_this._onDrop),_on(ownerDocument,"touchcancel",_this._onDrop),_on(ownerDocument,"selectstart",_this),options.supportPointer&&_on(ownerDocument,"pointercancel",_this._onDrop),options.delay?(_on(ownerDocument,"mouseup",_this._disableDelayedDrag),_on(ownerDocument,"touchend",_this._disableDelayedDrag),_on(ownerDocument,"touchcancel",_this._disableDelayedDrag),_on(ownerDocument,"mousemove",_this._disableDelayedDrag),_on(ownerDocument,"touchmove",_this._disableDelayedDrag),options.supportPointer&&_on(ownerDocument,"pointermove",_this._disableDelayedDrag),_this._dragStartTimer=setTimeout(dragStartFn,options.delay)):dragStartFn())},_disableDelayedDrag:function(){var ownerDocument=this.el.ownerDocument;clearTimeout(this._dragStartTimer),_off(ownerDocument,"mouseup",this._disableDelayedDrag),_off(ownerDocument,"touchend",this._disableDelayedDrag),_off(ownerDocument,"touchcancel",this._disableDelayedDrag),_off(ownerDocument,"mousemove",this._disableDelayedDrag),_off(ownerDocument,"touchmove",this._disableDelayedDrag),_off(ownerDocument,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(evt,touch){touch=touch||("touch"==evt.pointerType?evt:null),touch?(tapEvt={target:dragEl,clientX:touch.clientX,clientY:touch.clientY},this._onDragStart(tapEvt,"touch")):this.nativeDraggable?(_on(dragEl,"dragend",this),_on(rootEl,"dragstart",this._onDragStart)):this._onDragStart(tapEvt,!0);try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(err){}},_dragStarted:function(){if(rootEl&&dragEl){var options=this.options;_toggleClass(dragEl,options.ghostClass,!0),_toggleClass(dragEl,options.dragClass,!1),Sortable.active=this,_dispatchEvent(this,rootEl,"start",dragEl,rootEl,rootEl,oldIndex)}else this._nulling()},_emulateDragOver:function(){if(touchEvt){if(this._lastX===touchEvt.clientX&&this._lastY===touchEvt.clientY)return;this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,supportCssPointerEvents||_css(ghostEl,"display","none");var target=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),parent=target,i=touchDragOverListeners.length;if(target&&target.shadowRoot&&(target=target.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),parent=target),parent)do{if(parent[expando]){for(;i--;)touchDragOverListeners[i]({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:target,rootEl:parent});break}target=parent}while(parent=parent.parentNode);supportCssPointerEvents||_css(ghostEl,"display","")}},_onTouchMove:function(evt){if(tapEvt){var options=this.options,fallbackTolerance=options.fallbackTolerance,fallbackOffset=options.fallbackOffset,touch=evt.touches?evt.touches[0]:evt,dx=touch.clientX-tapEvt.clientX+fallbackOffset.x,dy=touch.clientY-tapEvt.clientY+fallbackOffset.y,translate3d=evt.touches?"translate3d("+dx+"px,"+dy+"px,0)":"translate("+dx+"px,"+dy+"px)";if(!Sortable.active){if(fallbackTolerance&&min(abs(touch.clientX-this._lastX),abs(touch.clientY-this._lastY))<fallbackTolerance)return;this._dragStarted()}this._appendGhost(),moved=!0,touchEvt=touch,_css(ghostEl,"webkitTransform",translate3d),_css(ghostEl,"mozTransform",translate3d),_css(ghostEl,"msTransform",translate3d),_css(ghostEl,"transform",translate3d),evt.preventDefault()}},_appendGhost:function(){if(!ghostEl){var ghostRect,rect=dragEl.getBoundingClientRect(),css=_css(dragEl),options=this.options;ghostEl=dragEl.cloneNode(!0),_toggleClass(ghostEl,options.ghostClass,!1),_toggleClass(ghostEl,options.fallbackClass,!0),_toggleClass(ghostEl,options.dragClass,!0),_css(ghostEl,"top",rect.top-parseInt(css.marginTop,10)),_css(ghostEl,"left",rect.left-parseInt(css.marginLeft,10)),_css(ghostEl,"width",rect.width),_css(ghostEl,"height",rect.height),_css(ghostEl,"opacity","0.8"),_css(ghostEl,"position","fixed"),_css(ghostEl,"zIndex","100000"),_css(ghostEl,"pointerEvents","none"),options.fallbackOnBody&&document.body.appendChild(ghostEl)||rootEl.appendChild(ghostEl),ghostRect=ghostEl.getBoundingClientRect(),_css(ghostEl,"width",2*rect.width-ghostRect.width),_css(ghostEl,"height",2*rect.height-ghostRect.height)}},_onDragStart:function(evt,useFallback){var _this=this,dataTransfer=evt.dataTransfer,options=_this.options;_this._offUpEvents(),activeGroup.checkPull(_this,_this,dragEl,evt)&&(cloneEl=_clone(dragEl),cloneEl.draggable=!1,cloneEl.style["will-change"]="",_css(cloneEl,"display","none"),_toggleClass(cloneEl,_this.options.chosenClass,!1),_this._cloneId=_nextTick(function(){rootEl.insertBefore(cloneEl,dragEl),_dispatchEvent(_this,rootEl,"clone",dragEl)})),_toggleClass(dragEl,options.dragClass,!0),useFallback?("touch"===useFallback?(_on(document,"touchmove",_this._onTouchMove),_on(document,"touchend",_this._onDrop),_on(document,"touchcancel",_this._onDrop),options.supportPointer&&(_on(document,"pointermove",_this._onTouchMove),_on(document,"pointerup",_this._onDrop))):(_on(document,"mousemove",_this._onTouchMove),_on(document,"mouseup",_this._onDrop)),_this._loopId=setInterval(_this._emulateDragOver,50)):(dataTransfer&&(dataTransfer.effectAllowed="move",options.setData&&options.setData.call(_this,dataTransfer,dragEl)),_on(document,"drop",_this),_this._dragStartId=_nextTick(_this._dragStarted))},_onDragOver:function(evt){var target,dragRect,targetRect,revert,el=this.el,options=this.options,group=options.group,activeSortable=Sortable.active,isOwner=activeGroup===group,isMovingBetweenSortable=!1,canSort=options.sort;if(void 0!==evt.preventDefault&&(evt.preventDefault(),!options.dragoverBubble&&evt.stopPropagation()),!dragEl.animated&&(moved=!0,activeSortable&&!options.disabled&&(isOwner?canSort||(revert=!rootEl.contains(dragEl)):putSortable===this||(activeSortable.lastPullMode=activeGroup.checkPull(this,activeSortable,dragEl,evt))&&group.checkPut(this,activeSortable,dragEl,evt))&&(void 0===evt.rootEl||evt.rootEl===this.el))){if(_autoScroll(evt,options,this.el),_silent)return;if(target=_closest(evt.target,options.draggable,el),dragRect=dragEl.getBoundingClientRect(),putSortable!==this&&(putSortable=this,isMovingBetweenSortable=!0),revert)return _cloneHide(activeSortable,!0),parentEl=rootEl,void(cloneEl||nextEl?rootEl.insertBefore(dragEl,cloneEl||nextEl):canSort||rootEl.appendChild(dragEl));if(0===el.children.length||el.children[0]===ghostEl||el===evt.target&&_ghostIsLast(el,evt)){if(0!==el.children.length&&el.children[0]!==ghostEl&&el===evt.target&&(target=el.lastElementChild),target){if(target.animated)return;targetRect=target.getBoundingClientRect()}_cloneHide(activeSortable,isOwner),!1!==_onMove(rootEl,el,dragEl,dragRect,target,targetRect,evt)&&(dragEl.contains(el)||(el.appendChild(dragEl),parentEl=el),this._animate(dragRect,dragEl),target&&this._animate(targetRect,target))}else if(target&&!target.animated&&target!==dragEl&&void 0!==target.parentNode[expando]){lastEl!==target&&(lastEl=target,lastCSS=_css(target),lastParentCSS=_css(target.parentNode)),targetRect=target.getBoundingClientRect();var width=targetRect.right-targetRect.left,height=targetRect.bottom-targetRect.top,floating=R_FLOAT.test(lastCSS.cssFloat+lastCSS.display)||"flex"==lastParentCSS.display&&0===lastParentCSS["flex-direction"].indexOf("row"),isWide=target.offsetWidth>dragEl.offsetWidth,isLong=target.offsetHeight>dragEl.offsetHeight,halfway=(floating?(evt.clientX-targetRect.left)/width:(evt.clientY-targetRect.top)/height)>.5,nextSibling=target.nextElementSibling,after=!1;if(floating){var elTop=dragEl.offsetTop,tgTop=target.offsetTop;after=elTop===tgTop?target.previousElementSibling===dragEl&&!isWide||halfway&&isWide:target.previousElementSibling===dragEl||dragEl.previousElementSibling===target?(evt.clientY-targetRect.top)/height>.5:tgTop>elTop}else isMovingBetweenSortable||(after=nextSibling!==dragEl&&!isLong||halfway&&isLong);var moveVector=_onMove(rootEl,el,dragEl,dragRect,target,targetRect,evt,after);!1!==moveVector&&(1!==moveVector&&-1!==moveVector||(after=1===moveVector),_silent=!0,setTimeout(_unsilent,30),_cloneHide(activeSortable,isOwner),dragEl.contains(el)||(after&&!nextSibling?el.appendChild(dragEl):target.parentNode.insertBefore(dragEl,after?nextSibling:target)),parentEl=dragEl.parentNode,this._animate(dragRect,dragEl),this._animate(targetRect,target))}}},_animate:function(prevRect,target){var ms=this.options.animation;if(ms){var currentRect=target.getBoundingClientRect();1===prevRect.nodeType&&(prevRect=prevRect.getBoundingClientRect()),_css(target,"transition","none"),_css(target,"transform","translate3d("+(prevRect.left-currentRect.left)+"px,"+(prevRect.top-currentRect.top)+"px,0)"),target.offsetWidth,_css(target,"transition","all "+ms+"ms"),_css(target,"transform","translate3d(0,0,0)"),clearTimeout(target.animated),target.animated=setTimeout(function(){_css(target,"transition",""),_css(target,"transform",""),target.animated=!1},ms)}},_offUpEvents:function(){var ownerDocument=this.el.ownerDocument;_off(document,"touchmove",this._onTouchMove),_off(document,"pointermove",this._onTouchMove),_off(ownerDocument,"mouseup",this._onDrop),_off(ownerDocument,"touchend",this._onDrop),_off(ownerDocument,"pointerup",this._onDrop),_off(ownerDocument,"touchcancel",this._onDrop),_off(ownerDocument,"pointercancel",this._onDrop),_off(ownerDocument,"selectstart",this)},_onDrop:function(evt){var el=this.el,options=this.options;clearInterval(this._loopId),clearInterval(autoScroll.pid),clearTimeout(this._dragStartTimer),_cancelNextTick(this._cloneId),_cancelNextTick(this._dragStartId),_off(document,"mouseover",this),_off(document,"mousemove",this._onTouchMove),this.nativeDraggable&&(_off(document,"drop",this),_off(el,"dragstart",this._onDragStart)),this._offUpEvents(),evt&&(moved&&(evt.preventDefault(),!options.dropBubble&&evt.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),rootEl!==parentEl&&"clone"===Sortable.active.lastPullMode||cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&_off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",_toggleClass(dragEl,this.options.ghostClass,!1),_toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent(this,rootEl,"unchoose",dragEl,parentEl,rootEl,oldIndex),rootEl!==parentEl?(newIndex=_index(dragEl,options.draggable))>=0&&(_dispatchEvent(null,parentEl,"add",dragEl,parentEl,rootEl,oldIndex,newIndex),_dispatchEvent(this,rootEl,"remove",dragEl,parentEl,rootEl,oldIndex,newIndex),_dispatchEvent(null,parentEl,"sort",dragEl,parentEl,rootEl,oldIndex,newIndex),_dispatchEvent(this,rootEl,"sort",dragEl,parentEl,rootEl,oldIndex,newIndex)):dragEl.nextSibling!==nextEl&&(newIndex=_index(dragEl,options.draggable))>=0&&(_dispatchEvent(this,rootEl,"update",dragEl,parentEl,rootEl,oldIndex,newIndex),_dispatchEvent(this,rootEl,"sort",dragEl,parentEl,rootEl,oldIndex,newIndex)),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex),_dispatchEvent(this,rootEl,"end",dragEl,parentEl,rootEl,oldIndex,newIndex),this.save()))),this._nulling()},_nulling:function(){rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=scrollEl=scrollParentEl=tapEvt=touchEvt=moved=newIndex=lastEl=lastCSS=putSortable=activeGroup=Sortable.active=null,savedInputChecked.forEach(function(el){el.checked=!0}),savedInputChecked.length=0},handleEvent:function(evt){switch(evt.type){case"drop":case"dragend":this._onDrop(evt);break;case"dragover":case"dragenter":dragEl&&(this._onDragOver(evt),_globalDragOver(evt));break;case"mouseover":this._onDrop(evt);break;case"selectstart":evt.preventDefault()}},toArray:function(){for(var el,order=[],children=this.el.children,i=0,n=children.length,options=this.options;i<n;i++)el=children[i],_closest(el,options.draggable,this.el)&&order.push(el.getAttribute(options.dataIdAttr)||_generateId(el));return order},sort:function(order){var items={},rootEl=this.el;this.toArray().forEach(function(id,i){var el=rootEl.children[i];_closest(el,this.options.draggable,rootEl)&&(items[id]=el)},this),order.forEach(function(id){items[id]&&(rootEl.removeChild(items[id]),rootEl.appendChild(items[id]))})},save:function(){var store=this.options.store;store&&store.set(this)},closest:function(el,selector){return _closest(el,selector||this.options.draggable,this.el)},option:function(name,value){var options=this.options;if(void 0===value)return options[name];options[name]=value,"group"===name&&_prepareGroup(options)},destroy:function(){var el=this.el;el[expando]=null,_off(el,"mousedown",this._onTapStart),_off(el,"touchstart",this._onTapStart),_off(el,"pointerdown",this._onTapStart),this.nativeDraggable&&(_off(el,"dragover",this),_off(el,"dragenter",this)),Array.prototype.forEach.call(el.querySelectorAll("[draggable]"),function(el){el.removeAttribute("draggable")}),touchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver),1),this._onDrop(),this.el=el=null}},_on(document,"touchmove",function(evt){Sortable.active&&evt.preventDefault()}),Sortable.utils={on:_on,off:_off,css:_css,find:_find,is:function(el,selector){return!!_closest(el,selector,el)},extend:_extend,throttle:_throttle,closest:_closest,toggleClass:_toggleClass,clone:_clone,index:_index,nextTick:_nextTick,cancelNextTick:_cancelNextTick},Sortable.create=function(el,options){return new Sortable(el,options)},Sortable.version="1.7.0",Sortable})},function(module,exports,__webpack_require__){var content=__webpack_require__(0);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0};options.transform=void 0;var update=__webpack_require__(12)(content,options);content.locals&&(module.exports=content.locals),content.locals||module.hot.accept(0,function(){var newContent=__webpack_require__(0);"string"==typeof newContent&&(newContent=[[module.i,newContent,""]]),update(newContent)}),module.hot.dispose(function(){update()})},function(module,exports,__webpack_require__){"use strict";function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=toComment(cssMapping);return[content].concat(cssMapping.sources.map(function(source){return"/*# sourceURL="+cssMapping.sourceRoot+source+" */"})).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */"}module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map(function(item){var content=cssWithMappingToString(item,useSourceMap);return item[2]?"@media "+item[2]+"{"+content+"}":content}).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list,options){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],css=item[1],media=item[2],sourceMap=item[3],part={css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,style){var target=getElement(options.insertInto);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=stylesInsertedAtTop[stylesInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?target.insertBefore(style,lastStyleElementInsertedAtTop.nextSibling):target.appendChild(style):target.insertBefore(style,target.firstChild),stylesInsertedAtTop.push(style);else if("bottom"===options.insertAt)target.appendChild(style);else{if("object"!=typeof options.insertAt||!options.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var nextSibling=getElement(options.insertInto+" "+options.insertAt.before);target.insertBefore(style,nextSibling)}}function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style);var idx=stylesInsertedAtTop.indexOf(style);idx>=0&&stylesInsertedAtTop.splice(idx,1)}function createStyleElement(options){var style=document.createElement("style");return options.attrs.type="text/css",addAttrs(style,options.attrs),insertStyleElement(options,style),style}function createLinkElement(options){var link=document.createElement("link");return options.attrs.type="text/css",options.attrs.rel="stylesheet",addAttrs(link,options.attrs),insertStyleElement(options,link),link}function addAttrs(el,attrs){Object.keys(attrs).forEach(function(key){el.setAttribute(key,attrs[key])})}function addStyle(obj,options){var style,update,remove,result;if(options.transform&&obj.css){if(!(result=options.transform(obj.css)))return function(){};obj.css=result}if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=createStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(style=createLinkElement(options),update=updateLink.bind(null,style,options),remove=function(){removeStyleElement(style),style.href&&URL.revokeObjectURL(style.href)}):(style=createStyleElement(options),update=applyToTag.bind(null,style),remove=function(){removeStyleElement(style)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,obj){var css=obj.css,media=obj.media;if(media&&style.setAttribute("media",media),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}function updateLink(link,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css)),sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=link.href;link.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}var stylesInDom={},isOldIE=function(fn){var memo;return function(){return void 0===memo&&(memo=fn.apply(this,arguments)),memo}}(function(){return window&&document&&document.all&&!window.atob}),getElement=function(fn){var memo={};return function(selector){if(void 0===memo[selector]){var styleTarget=fn.call(this,selector);if(styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[selector]=styleTarget}return memo[selector]}}(function(target){return document.querySelector(target)}),singleton=null,singletonCounter=0,stylesInsertedAtTop=[],fixUrls=__webpack_require__(13);module.exports=function(list,options){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");options=options||{},options.attrs="object"==typeof options.attrs?options.attrs:{},options.singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE()),options.insertInto||(options.insertInto="head"),options.insertAt||(options.insertAt="bottom");var styles=listToStyles(list,options);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}if(newList){addStylesToDom(listToStyles(newList,options),options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()},function(module,exports,__webpack_require__){"use strict";module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/");return css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(fullMatch,origUrl){var unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,function(o,$1){return $1}).replace(/^'(.*)'$/,function(o,$1){return $1});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(unquotedOrigUrl))return fullMatch;var newUrl;return newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")"})}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_canvas=__webpack_require__(15),_canvas2=_interopRequireDefault(_canvas),_canvas3=__webpack_require__(16),_canvas4=_interopRequireDefault(_canvas3),_layer=__webpack_require__(17),_layer2=_interopRequireDefault(_layer),_layer3=__webpack_require__(18),_layer4=_interopRequireDefault(_layer3),DEFAULT_BRUSH_SIZE=3,DEFAULT_BACKGROUND_COLOR=[1,1,1],DEFAULT_LAYER_COLOR=[0,0,0],SimpleOekakiCanvas=function(){function SimpleOekakiCanvas(div){if(_classCallCheck(this,SimpleOekakiCanvas),this._diameter=DEFAULT_BRUSH_SIZE,this._backgroundColor=DEFAULT_BACKGROUND_COLOR,this._currentLayer=2,this._layerOrder=[0,1,2],this._layerColors=[DEFAULT_LAYER_COLOR,DEFAULT_LAYER_COLOR,DEFAULT_LAYER_COLOR],this._layerVisibility=[1,1,1],this._canvas=document.createElement("canvas"),this._canvas.height=800,this._canvas.width=800,div.appendChild(this._canvas),this._initializeGL(),!this._gl)throw new Error("could not create webgl context");this._setInputCallbacks()}return _createClass(SimpleOekakiCanvas,null,[{key:"VERSION",get:function(){return"0.4.1"}},{key:"MIN_BRUSH_SIZE",get:function(){return 1}},{key:"MAX_BRUSH_SIZE",get:function(){return 31}},{key:"DEFAULT_BRUSH_SIZE",get:function(){return DEFAULT_BRUSH_SIZE}},{key:"DEFAULT_BACKGROUND_COLOR",get:function(){return DEFAULT_BACKGROUND_COLOR}},{key:"DEFAULT_LAYER_COLOR",get:function(){return DEFAULT_LAYER_COLOR}}]),_createClass(SimpleOekakiCanvas,[{key:"getLayerColor",value:function(id){return-1===id?this.backgroundColor:this._layerColors[id]}},{key:"setLayerColor",value:function(id,color){-1===id?this.backgroundColor=color:(this._layerColors[id]=color,this._onLayerColorChange&&this._onLayerColorChange(id,color))}},{key:"paintLine",value:function(x0,y0,x1,y1){this._gl.useProgram(this._layerShaderProgram),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._canvasFBO),this._gl.uniform4f(this._fragmentLineUniform,Math.round(x0)+.5,800-Math.round(y0)+.5,Math.round(x1)+.5,800-Math.round(y1)+.5);var size=[.1+(Math.abs(x0-x1)+2*this._diameter)/this._canvas.width*2,.1+(Math.abs(y0-y1)+2*this._diameter)/this._canvas.height*2],offset=[(x0+x1)/2/this._canvas.width*2-1,2*(1-(y0+y1)/2/this._canvas.height)-1];this._gl.uniform1f(this._fragmentThicknessUniform,this._diameter),this._gl.uniform2f(this._fragmentSizeUniform,size[0],size[1]),this._gl.uniform2f(this._fragmentOffsetUniform,offset[0],offset[1]),this._gl.blendColor(0===this._currentLayer?1:0,1===this._currentLayer?1:0,2===this._currentLayer?1:0,1),this._gl.blendFunc(this._gl.CONSTANT_COLOR,this._gl.ONE_MINUS_CONSTANT_COLOR),this._gl.drawArrays(this._gl.TRIANGLE_STRIP,0,4)}},{key:"paintGL",value:function(){this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.useProgram(this._canvasShaderProgram),this._gl.clearColor(this._backgroundColor[0],this._backgroundColor[1],this._backgroundColor[2],1),this._gl.clear(this._gl.COLOR_BUFFER_BIT),this._gl.uniform3fv(this._fragmentBackgroundColorUniform,this._backgroundColor),this._gl.uniform3iv(this._fragmentLayerOrderUniform,this._layerOrder),this._gl.uniform3fv(this._fragmentLayerVisibilityUniform,this._layerVisibility),this._gl.uniformMatrix3fv(this._fragmentLayerColorsUniform,!1,this._layerColors[0].concat(this._layerColors[1],this._layerColors[2])),this._gl.blendFunc(this._gl.ONE,this._gl.ZERO),this._gl.drawArrays(this._gl.TRIANGLE_STRIP,0,4)}},{key:"_getShader",value:function(str,type){var shader=this._gl.createShader(type);return this._gl.shaderSource(shader,str),this._gl.compileShader(shader),this._gl.getShaderParameter(shader,this._gl.COMPILE_STATUS)?shader:null}},{key:"_initBuffers",value:function(){var canvasBuffer=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,canvasBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),this._gl.STATIC_DRAW),this._gl.vertexAttribPointer(this._vertexPositionAttribute2,2,this._gl.FLOAT,!1,0,0),this._gl.vertexAttribPointer(this._vertexPositionAttribute,2,this._gl.FLOAT,!1,0,0),this._gl.enable(this._gl.BLEND),this._canvasFBO=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._canvasFBO),this._canvasFBO.width=this._canvas.width,this._canvasFBO.height=this._canvas.height,this._canvasTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._canvasTexture),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._canvasFBO.width,this._canvasFBO.height,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._canvasTexture,0),this._gl.clearColor(0,0,0,1),this._gl.clear(this._gl.COLOR_BUFFER_BIT),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}},{key:"_initShaderProgram",value:function(fsh,vsh){var vertexShader=this._getShader(vsh,this._gl.VERTEX_SHADER),fragmentShader=this._getShader(fsh,this._gl.FRAGMENT_SHADER),shaderProgram=this._gl.createProgram();this._gl.attachShader(shaderProgram,vertexShader),this._gl.attachShader(shaderProgram,fragmentShader),this._gl.linkProgram(shaderProgram),this._gl.getProgramParameter(shaderProgram,this._gl.LINK_STATUS),this._gl.useProgram(shaderProgram);var VertexPositionAttribute=this._gl.getAttribLocation(shaderProgram,"position");return this._gl.enableVertexAttribArray(VertexPositionAttribute),shaderProgram}},{key:"_initShaders",value:function(){this._canvasShaderProgram=this._initShaderProgram(_canvas4.default,_canvas2.default),this._fragmentBackgroundColorUniform=this._gl.getUniformLocation(this._canvasShaderProgram,"backgroundColor"),this._fragmentLayerOrderUniform=this._gl.getUniformLocation(this._canvasShaderProgram,"layerOrder"),this._fragmentLayerColorsUniform=this._gl.getUniformLocation(this._canvasShaderProgram,"layerColors"),this._fragmentLayerVisibilityUniform=this._gl.getUniformLocation(this._canvasShaderProgram,"layerVisibility"),this._layerShaderProgram=this._initShaderProgram(_layer4.default,_layer2.default),this._fragmentLineUniform=this._gl.getUniformLocation(this._layerShaderProgram,"line"),this._fragmentThicknessUniform=this._gl.getUniformLocation(this._layerShaderProgram,"thickness"),this._fragmentOffsetUniform=this._gl.getUniformLocation(this._layerShaderProgram,"offset"),this._fragmentSizeUniform=this._gl.getUniformLocation(this._layerShaderProgram,"size")}},{key:"_setInputCallbacks",value:function(){var _this=this,isDown=void 0,currentMousePos=void 0,getMouse=function(e){var bbox=_this._canvas.getBoundingClientRect();return{x:e.clientX-bbox.left*(_this._canvas.width/bbox.width),y:e.clientY-bbox.top*(_this._canvas.height/bbox.height)}};this._canvas.addEventListener("mousedown",function(startEvent){currentMousePos=getMouse(startEvent),_this.paintLine(currentMousePos.x,currentMousePos.y,currentMousePos.x,currentMousePos.y),isDown=!0}),document.addEventListener("mouseup",function(){isDown=!1}),document.addEventListener("mousemove",function(moveEvent){if(isDown){var nextPos=getMouse(moveEvent);_this.paintLine(currentMousePos.x,currentMousePos.y,nextPos.x,nextPos.y),currentMousePos=nextPos,moveEvent.preventDefault()}}),this._canvas.addEventListener("touchstart",function(startEvent){currentMousePos=getMouse(startEvent.targetTouches[0]),_this.paintLine(currentMousePos.x,currentMousePos.y,currentMousePos.x,currentMousePos.y),isDown=!0}),document.addEventListener("touchend",function(){isDown=!1}),this._canvas.addEventListener("touchmove",function(moveEvent){if(isDown){moveEvent.preventDefault();var nextPos=getMouse(moveEvent.targetTouches[0]);_this.paintLine(currentMousePos.x,currentMousePos.y,nextPos.x,nextPos.y),currentMousePos=nextPos,moveEvent.stopPropagation(),moveEvent.cancelBubble=!0}})}},{key:"_initializeGL",value:function(){this._gl=this._canvas.getContext("webgl")||this._canvas.getContext("experimental-webgl"),this._gl.clearColor(0,0,0,1),this._gl.viewport(0,0,this._canvas.width,this._canvas.height),this._initShaders(),this._initBuffers();var self=this;setInterval(function(){self.paintGL()},15)}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(color){this._backgroundColor=color,this._onBackgroundColorChange&&this._onBackgroundColorChange(color)}},{key:"layerOrder",get:function(){return this._layerOrder},set:function(order){this._layerOrder=order}},{key:"currentLayer",get:function(){return this._currentLayer},set:function(id){id!==this._currentLayer&&id>=0&&id<3&&(this._currentLayer=id,this._onCurrentLayerChange&&this._onCurrentLayerChange(id))}},{key:"brushSize",get:function(){return this._diameter},set:function(size){size!==this._diameter&&(this._diameter=size,this._diameter<1&&(this._diameter=1),this._diameter>31&&(this._diameter=31),this._onBrushSizeChange&&this._onBrushSizeChange(this._diameter))}}]),SimpleOekakiCanvas}();void 0!==module&&module.exports&&(module.exports=SimpleOekakiCanvas),window&&(window.SimpleOekakiCanvas=SimpleOekakiCanvas)},function(module,exports){module.exports="attribute vec2 position;\nvarying vec2 Texcoord;\nvoid main(void) {\n  Texcoord = (position+1.0) / 2.0;\n  gl_Position = vec4(position, 0.0, 1.0);\n}"},function(module,exports){module.exports="precision mediump float;\n\nvarying vec2 Texcoord;\nuniform vec3 backgroundColor;\nuniform sampler2D imageTex;\n\nuniform ivec3 layerOrder;\nuniform vec3 layerVisibility;\nuniform mat3 layerColors;\n\nvoid main(void){\n  vec4 texColor = texture2D(imageTex,Texcoord);\n\n  vec3 outputColor = backgroundColor;\n\n  for(int i = 0; i < 3; i++){\n    int currentLayer = layerOrder[i];\n\n  if(currentLayer == 0){\n      vec3 currentColor = layerColors[0];\n      float currentSet = texColor[0];\n      currentSet = currentSet * layerVisibility[0];\n      outputColor = currentSet * currentColor + outputColor * (1.0-currentSet); \n    } else if(currentLayer == 1){\n      vec3 currentColor = layerColors[1];\n      float currentSet = texColor[1];\n      currentSet = currentSet * layerVisibility[1];\n      outputColor = currentSet * currentColor + outputColor * (1.0-currentSet);\n    } else {\n      vec3 currentColor = layerColors[2];\n      float currentSet = texColor[2];\n      currentSet = currentSet * layerVisibility[2];\n      outputColor = currentSet * currentColor + outputColor * (1.0-currentSet);\n    }\n  }\n  gl_FragColor = vec4(outputColor,1.0);\n}"},function(module,exports){module.exports="attribute vec2 position;\nuniform vec2 offset;\nuniform vec2 size;\nvoid main(void) {\n  vec2 newPosition = position * size;\n  newPosition = newPosition + offset;\n  gl_Position = vec4(newPosition, 0.0, 1.0);\n}"},function(module,exports){module.exports="precision mediump float;\n\nuniform vec4 line;\nuniform float thickness;\n\nvoid main(void){\n  float x = gl_FragCoord.x;\n  float y = gl_FragCoord.y;\n  \n  float x1 = line[0];\n  float y1 = line[1];\n  float x2 = line[2];\n  float y2 = line[3];\n\n  float A = x - x1;\n  float B = y - y1;\n  float C = x2 - x1;\n  float D = y2 - y1;\n  \n  float dot = A * C + B * D;\n  float len_sq = C * C + D * D;\n  float param = -1.0;\n  if (len_sq != 0.0) //in case of 0 length line\n      param = dot / len_sq;\n  \n  float xx, yy;\n  \n  if (param < 0.0){\n    xx = x1;\n    yy = y1;\n  } else if(param > 1.0){\n    xx = x2;\n    yy = y2;\n  } else if(abs(C) > abs(D)){\n    xx = floor(x1 + param * C) + 0.5;\n    yy = floor(y1 + (xx - x1) / C * D) + 0.5;\n  }else{\n    yy = floor(y1 + param * D) + 0.5;\n    xx = floor(x1 + (yy - y1) / D * C) +0.5;\n  }\n  float d = distance(vec2(x,y),vec2(xx,yy));\n\n  if(d > thickness/2.0) discard;\n\n  gl_FragColor = vec4(1.0,1.0,1.0,1.0);\n}"},function(module,exports,__webpack_require__){"use strict";var DECtoHEX=function(c){var hex=c.toString(16);return 1===hex.length?"0"+hex:hex},HTMLtoRGB=function(htmlcolor){return htmlcolor.match(/[A-Za-z0-9]{2}/g).map(function(v){return parseInt(v,16)/255})},RGBtoHTML=function(rgbcolor){return"#"+DECtoHEX(255*rgbcolor[0])+DECtoHEX(255*rgbcolor[1])+DECtoHEX(255*rgbcolor[2])},iRGBtoRGB=function(irgbcolor){return[irgbcolor.r/255,irgbcolor.g/255,irgbcolor.b/255]},RGBtoiRGB=function(rgbcolor){return{r:255*rgbcolor[0],g:255*rgbcolor[1],b:250*rgbcolor[2]}};module.exports={DECtoHEX:DECtoHEX,HTMLtoRGB:HTMLtoRGB,RGBtoHTML:RGBtoHTML,iRGBtoRGB:iRGBtoRGB,RGBtoiRGB:RGBtoiRGB}}]);
//# sourceMappingURL=SimpleOekaki.min.js.map